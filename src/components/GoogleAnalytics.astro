---
const gaMeasurementId = import.meta.env.PUBLIC_GA_MEASUREMENT_ID;
if (!gaMeasurementId) {
  console.warn("Missing PUBLIC_GA_MEASUREMENT_ID â†’ Google Analytics disabled");
}
---

{
  gaMeasurementId && (
    <>
      {/* Partytown proxy + GA4 script */}
      <script
        async
        src={`https://www.googletagmanager.com/gtag/js?id=${gaMeasurementId}`}
      ></script>

      <script>
        if ('dataLayer' in window) {
          window.dataLayer = window.dataLayer || [];

          function gtag(...args: any[]){
            'dataLayer' in window && Array.isArray(window.dataLayer) && window.dataLayer?.push(args);
          }

          gtag("js", new Date());
          gtag("config", "{gaMeasurementId}");
        }
        
      </script>
    </>
  )
}
